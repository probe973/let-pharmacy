{% assign quiz_data = site.data[include.source] %}

<section id="quiz-container" class="quiz-container">
    <div class="quiz-status" aria-live="polite">
        <p>Question <span id="current-q-num">0</span> of 20</p>
        <p>Score: <span id="score-count">0</span>/20</p>
        <p>Time: <span id="timer-display">0:00</span></p>
    </div>

    <div id="quiz-box">
        <div id="question-text" class="question-box" role="region" aria-live="assertive">
            <!-- The question text will appear here -->
        </div>

        <div class="answer-section">
            <label for="user-answer">Your Answer:</label>
            <!-- Note: we use type="number" but the CSS from Step 1 hides the arrows -->
            <input type="number" id="user-answer" step="any" placeholder="0.0" required>
            
            <div class="button-group">
                <button id="btn-check" class="btn">Check Answer</button>
                <button id="btn-skip" class="btn btn-secondary">Skip Question</button>
                <button id="btn-solution" class="btn btn-secondary" disabled>Show Solution</button>
                <button id="btn-next" class="btn" style="display:none;">Next Question</button>
            </div>
        </div>

        <div id="feedback" class="feedback-box" aria-live="polite"></div>
        
        <div id="solution-box" class="solution-box" style="display:none;" role="region">
            <strong>Step-by-Step Solution:</strong>
            <div id="solution-text"></div>
        </div>
    </div>

    <div id="final-results" style="display:none;">
        <h3>Quiz Complete!</h3>
        <p>Final Score: <span id="final-score"></span>/20</p>
        <p>Total Time: <span id="final-time"></span></p>
        <button onclick="location.reload()" class="btn">Restart Quiz</button>
    </div>
</section>

<!-- This script line allows Jekyll to pass your question data to the browser safely -->
<script>
    const allQuestions = {{ quiz_data | jsonify | default: '[]' }};
</script>
